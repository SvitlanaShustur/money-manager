# –º–µ–Ω–µ–¥–∂–µ—Ä –ø–æ–∫—É–ø–æ–∫
# üîπ –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–æ–≥–æ —Ç–æ–≤–∞—Ä—É –¥–æ —Å–ø–∏—Å–∫—É –ø–æ–∫—É–ø–æ–∫
def add_item(shopping_list):
    # –ó–∞–ø–∏—Ç—É—î–º–æ —É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –Ω–∞–∑–≤—É —Ç–æ–≤–∞—Ä—É, –∫—ñ–ª—å–∫—ñ—Å—Ç—å —ñ —Ü—ñ–Ω—É
    name = input("–í–≤–µ–¥—ñ—Ç—å –Ω–∞–∑–≤—É —Ç–æ–≤–∞—Ä—É: ")
    quantity = int(input("–í–≤–µ–¥—ñ—Ç—å –∫—ñ–ª—å–∫—ñ—Å—Ç—å: "))
    price = float(input("–í–≤–µ–¥—ñ—Ç—å —Ü—ñ–Ω—É: "))

    # –°—Ç–≤–æ—Ä—é—î–º–æ —Å–ª–æ–≤–Ω–∏–∫, —è–∫–∏–π –æ–ø–∏—Å—É—î –æ–¥–∏–Ω —Ç–æ–≤–∞—Ä
    item = {
        "name": name,       # –Ω–∞–∑–≤–∞ —Ç–æ–≤–∞—Ä—É
        "quantity": quantity,  # –∫—ñ–ª—å–∫—ñ—Å—Ç—å
        "price": price         # —Ü—ñ–Ω–∞ –∑–∞ –æ–¥–∏–Ω–∏—Ü—é
    }

    # –î–æ–¥–∞—î–º–æ —Ü–µ–π —Å–ª–æ–≤–Ω–∏–∫ –¥–æ —Å–ø–∏—Å–∫—É –ø–æ–∫—É–ø–æ–∫
    shopping_list.append(item)

    # –í–∏–≤–æ–¥–∏–º–æ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
    print(f"‚úÖ {name} –¥–æ–¥–∞–Ω–æ –¥–æ —Å–ø–∏—Å–∫—É!")


# üîπ –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –ø–æ–∫–∞–∑—É –≤—Å—å–æ–≥–æ —Å–ø–∏—Å–∫—É –ø–æ–∫—É–ø–æ–∫
def show_list(shopping_list):
    '''
    –¶–µ –ø—Ä–∏–∫–ª–∞–¥ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ —Å–ø–∏—Å–∫—É:
    shopping_list = [
        {"name": "–•–ª—ñ–±", "quantity": 2, "price": 25},
        {"name": "–ú–æ–ª–æ–∫–æ", "quantity": 1, "price": 35}
    ]
    '''
    # –Ø–∫—â–æ —Å–ø–∏—Å–æ–∫ –ø–æ—Ä–æ–∂–Ω—ñ–π ‚Äî –ø–æ–≤—ñ–¥–æ–º–ª—è—î–º–æ –ø—Ä–æ —Ü–µ
    if not shopping_list: 
        print("\nList is empty")
        return
    
    # –Ø–∫—â–æ —Å–ø–∏—Å–æ–∫ –Ω–µ –ø–æ—Ä–æ–∂–Ω—ñ–π ‚Äî –ø–æ–∫–∞–∑—É—î–º–æ –≤–º—ñ—Å—Ç
    print("\nYour list: ")
    # –ü—Ä–æ—Ö–æ–¥–∏–º–æ –ø–æ –∫–æ–∂–Ω–æ–º—É –µ–ª–µ–º–µ–Ω—Ç—É (—Ç–æ–≤–∞—Ä—É) —É —Å–ø–∏—Å–∫—É
    for i, item in enumerate(shopping_list, start=1):
        # –í–∏–≤–æ–¥–∏–º–æ –Ω–æ–º–µ—Ä —Ç–æ–≤–∞—Ä—É, –Ω–∞–∑–≤—É, –∫—ñ–ª—å–∫—ñ—Å—Ç—å —ñ —Ü—ñ–Ω—É
        print(f"{i}) {item['name']} - {item['quantity']} x {item['price']}‚Ç¨")


# üîπ –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –ø—ñ–¥—Ä–∞—Ö—É–Ω–∫—É –∑–∞–≥–∞–ª—å–Ω–æ—ó —Å—É–º–∏ –ø–æ–∫—É–ø–æ–∫
def count_total(shopping_list):
    total = 0  # —Å—Ç–≤–æ—Ä—é—î–º–æ –∑–º—ñ–Ω–Ω—É –¥–ª—è –Ω–∞–∫–æ–ø–∏—á–µ–Ω–Ω—è —Å—É–º–∏
    for item in shopping_list:
        # –¥–æ–¥–∞—î–º–æ –¥–æ total —Ä–µ–∑—É–ª—å—Ç–∞—Ç –º–Ω–æ–∂–µ–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –Ω–∞ —Ü—ñ–Ω—É
        total += item["quantity"] * item["price"]
    # –í–∏–≤–æ–¥–∏–º–æ –ø—ñ–¥—Å—É–º–∫–æ–≤—É —Å—É–º—É –∑ –¥–≤–æ–º–∞ –∑–Ω–∞–∫–∞–º–∏ –ø—ñ—Å–ª—è –∫–æ–º–∏
    print(f"Total price {total:.2f} ‚Ç¨")


# üîπ –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Å–ø–∏—Å–∫—É –ø–æ–∫—É–ø–æ–∫ —É —Ñ–∞–π–ª
def save_to_file(shopping_list):
    # "w" ‚Äî –≤—ñ–¥–∫—Ä–∏—Ç–∏ —Ñ–∞–π–ª –¥–ª—è –∑–∞–ø–∏—Å—É (–ø–µ—Ä–µ–∑–∞–ø–∏—à–µ, —è–∫—â–æ —ñ—Å–Ω—É—î)
    # encoding="utf-8" ‚Äî —â–æ–± –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞—Ç–∏ —É–∫—Ä–∞—ó–Ω—Å—å–∫—ñ –ª—ñ—Ç–µ—Ä–∏
    with open("text.txt", "w", encoding="utf-8") as f:
        # –ü—Ä–æ—Ö–æ–¥–∏–º–æ –ø–æ –∫–æ–∂–Ω–æ–º—É —Ç–æ–≤–∞—Ä—É –≤ —Å–ø–∏—Å–∫—É
        for i, item in enumerate(shopping_list, start=1):
            # –ó–∞–ø–∏—Å—É—î–º–æ –∫–æ–∂–µ–Ω —Ç–æ–≤–∞—Ä —É —Ä—è–¥–æ–∫ —Ñ–∞–π–ª—É
            f.write(f"{i}). {item['name']} - {item['quantity']} x {item['price']}‚Ç¨\n")
    # –ü—ñ—Å–ª—è –≤–∏—Ö–æ–¥—É –∑ "with" —Ñ–∞–π–ª –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–∫—Ä–∏–≤–∞—î—Ç—å—Å—è
    print("‚úÖ Shopping list saved to text.txt")


# üîπ –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å–ø–∏—Å–∫—É –ø–æ–∫—É–ø–æ–∫ –∑ —Ñ–∞–π–ª—É
def load_from_file():
    shopping_list = []  # —Å—Ç–≤–æ—Ä—é—î–º–æ –ø–æ—Ä–æ–∂–Ω—ñ–π —Å–ø–∏—Å–æ–∫ –¥–ª—è –∑—á–∏—Ç–∞–Ω–∏—Ö —Ç–æ–≤–∞—Ä—ñ–≤

    # –í—ñ–¥–∫—Ä–∏–≤–∞—î–º–æ —Ñ–∞–π–ª –¥–ª—è —á–∏—Ç–∞–Ω–Ω—è
    with open("text.txt", "r", encoding="utf-8") as f:
        # –ß–∏—Ç–∞—î–º–æ —Ñ–∞–π–ª —Ä—è–¥–æ–∫ –∑–∞ —Ä—è–¥–∫–æ–º
        for line in f:
            # –ü—Ä–∏–±–∏—Ä–∞—î–º–æ —Å–∏–º–≤–æ–ª –Ω–æ–≤–æ–≥–æ —Ä—è–¥–∫–∞ (\n) —Ç–∞ —Ä–æ–∑–±–∏–≤–∞—î–º–æ —Ä—è–¥–æ–∫ –Ω–∞ —á–∞—Å—Ç–∏–Ω–∏
            line_list = line.strip()[:-1].split()
            # –ù–∞–ø—Ä–∏–∫–ª–∞–¥, "1). –•–ª—ñ–± - 2 x 25‚Ç¨" ‚Üí ['1).', '–•–ª—ñ–±', '-', '2', 'x', '25']

            # –í–∏–±–∏—Ä–∞—î–º–æ –ø–æ—Ç—Ä—ñ–±–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏ –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å–ª–æ–≤–Ω–∏–∫–∞ —Ç–æ–≤–∞—Ä—É
            name, quantity, price = line_list[1], line_list[3], line_list[5]

            # –°—Ç–≤–æ—Ä—é—î–º–æ —Å–ª–æ–≤–Ω–∏–∫ –¥–ª—è —Ç–æ–≤–∞—Ä—É, –∫–æ–Ω–≤–µ—Ä—Ç—É—î–º–æ —Ç–∏–ø–∏ quantity —ñ price
            item = {
                "name": name,
                "quantity": int(quantity),
                "price": float(price)
            }

            # –î–æ–¥–∞—î–º–æ —Ç–æ–≤–∞—Ä —É —Å–ø–∏—Å–æ–∫
            shopping_list.append(item)

    print("‚úÖ File loaded successfully!")        
    return shopping_list  # –ø–æ–≤–µ—Ä—Ç–∞—î–º–æ –æ–Ω–æ–≤–ª–µ–Ω–∏–π —Å–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫


# üîπ –û—Å–Ω–æ–≤–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è –ø—Ä–æ–≥—Ä–∞–º–∏ ‚Äî –≥–æ–ª–æ–≤–Ω–µ –º–µ–Ω—é
def main():
    print("üõí –í—ñ—Ç–∞—é —É –º–µ–Ω–µ–¥–∂–µ—Ä—ñ –ø–æ–∫—É–ø–æ–∫! –ú–µ–Ω—é:")
    shopping_list = []  # —Å—Ç–≤–æ—Ä—é—î–º–æ –ø–æ—Ä–æ–∂–Ω—ñ–π —Å–ø–∏—Å–æ–∫ –¥–ª—è –ø–æ–∫—É–ø–æ–∫

    # –ë–µ–∑–∫—ñ–Ω–µ—á–Ω–∏–π —Ü–∏–∫–ª –º–µ–Ω—é, —è–∫–∏–π —Ç—Ä–∏–≤–∞—î, –ø–æ–∫–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–µ –æ–±–µ—Ä–µ ¬´–í–∏—Ö—ñ–¥¬ª
    while True:
        print('''
    –ú–µ–Ω—é:
    1. –î–æ–¥–∞—Ç–∏ –ø–æ–∫—É–ø–∫—É
    2. –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ —Å–ø–∏—Å–æ–∫
    3. –ü–æ—Ä–∞—Ö—É–≤–∞—Ç–∏ –∑–∞–≥–∞–ª—å–Ω—É —Å—É–º—É
    4. –ó–±–µ—Ä–µ–≥—Ç–∏ —É —Ñ–∞–π–ª
    5. –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –∑ —Ñ–∞–π–ª—É
    6. –í–∏—Ö—ñ–¥
        ''')
        
        # –û–±—Ä–æ–±–∫–∞ –º–æ–∂–ª–∏–≤–∏—Ö –ø–æ–º–∏–ª–æ–∫ –ø—Ä–∏ –≤–≤–µ–¥–µ–Ω–Ω—ñ –≤–∏–±–æ—Ä—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º
        try: 
            choice = int(input("–í–∞—à –≤–∏–±—ñ—Ä: "))
        except ValueError:
            print("‚ùå –í–≤–µ–¥—ñ—Ç—å —á–∏—Å–ª–æ –≤—ñ–¥ 1 –¥–æ 6!!")
            continue  # –ø–æ–≤–µ—Ä—Ç–∞—î–º–æ—Å—å —É –ø–æ—á–∞—Ç–æ–∫ —Ü–∏–∫–ª—É
        
        # –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—é match-case (Python 3.10+)
        match choice:
            case 1:
                # –î–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–æ–≥–æ —Ç–æ–≤–∞—Ä—É
                try:
                    add_item(shopping_list)
                except Exception as e:
                    print(f"‚ùå –°—Ç–∞–ª–∞—Å—è –ø–æ–º–∏–ª–∫–∞: {e}")

            case 2:
                # –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –ø–æ—Ç–æ—á–Ω–æ–≥–æ —Å–ø–∏—Å–∫—É
                show_list(shopping_list)

            case 3:
                # –ü—ñ–¥—Ä–∞—Ö—É–Ω–æ–∫ –∑–∞–≥–∞–ª—å–Ω–æ—ó –≤–∞—Ä—Ç–æ—Å—Ç—ñ –ø–æ–∫—É–ø–æ–∫
                count_total(shopping_list)

            case 4:
                # –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —É —Ñ–∞–π–ª
                save_to_file(shopping_list)

            case 5:
                # –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑ —Ñ–∞–π–ª—É
                try:
                    shopping_list = load_from_file()
                except FileNotFoundError:
                    print("‚ùå –§–∞–π–ª –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ!")

            case 6:
                # –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—è –ø—Ä–æ–≥—Ä–∞–º–∏
                print("üëã –î–æ –∑—É—Å—Ç—Ä—ñ—á—ñ!")
                break  # –≤–∏—Ö—ñ–¥ —ñ–∑ —Ü–∏–∫–ª—É

            case _:
                # –Ø–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–≤—ñ–≤ –Ω–µ—ñ—Å–Ω—É—é—á–∏–π –ø—É–Ω–∫—Ç –º–µ–Ω—é
                print("‚ùå –ü–æ–º–∏–ª–∫–∞! –í–≤–µ–¥—ñ—Ç—å —á–∏—Å–ª–æ –≤—ñ–¥ 1 –¥–æ 6!")

# üîπ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–≥—Ä–∞–º–∏ (—Ü–µ–π –±–ª–æ–∫ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ —è–∫—â–æ —Ñ–∞–π–ª –∑–∞–ø—É—â–µ–Ω–æ –Ω–∞–ø—Ä—è–º—É)
if __name__ == "__main__":
    main()